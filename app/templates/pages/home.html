{% extends "base.html" %}
{% from "macros/icons.html" import icon, icon_text %}

{% block title %}TIDE - Platform Overview{% endblock %}

{% block head %}
{% endblock %}

{% block content %}
<div class="page-header header-centered mb-xl">
    <img src="/static/icons/tide 48x48.png" alt="TIDE" class="mb-md" width="80" height="80">
    <h1 class="page-title-hero">TIDE</h1>
    <p class="page-subtitle">
         <strong>Threat Informed Detection Engineering</strong> â€” A standalone, containerized platform for managing detection rules, analyzing threat coverage, and automating security workflows.
    </p>
</div>

<!-- Key Modules -->
<div class="overview-section">
    <h2>{{ icon('layout-grid', '20') }} Key Modules</h2>
    <div class="module-grid">
        <a href="/dashboard" class="module-card">
            <div class="module-title">{{ icon('layout-dashboard', '18') }} Dashboard</div>
            <div class="module-desc">Aggregated overview of detection engineering program health.</div>
        </a>
        <a href="/rules" class="module-card">
            <div class="module-title">{{ icon('shield-check', '18') }} Rule Health</div>
            <div class="module-desc">Assess quality scores, field mappings, and validation status of detection rules.</div>
        </a>
        <a href="/promotion" class="module-card">
            <div class="module-title">{{ icon('circle-arrow-up', '18') }} Promotion</div>
            <div class="module-desc">Promote validated rules from staging to production with quality gates.</div>
        </a>
        <a href="/threats" class="module-card">
            <div class="module-title">{{ icon('target', '18') }} Threat Landscape</div>
            <div class="module-desc">Track threat actors and their TTPs from OpenCTI and other sources.</div>
        </a>
        <a href="/heatmap" class="module-card">
            <div class="module-title">{{ icon('grid-3x3', '18') }} MITRE Heatmap</div>
            <div class="module-desc">Visualize ATT&CK technique coverage and identify detection gaps.</div>
        </a>
        <a href="/sigma" class="module-card">
            <div class="module-title">{{ icon('sigma', '18') }} Sigma Converter</div>
            <div class="module-desc">Convert Sigma rules to Elastic KQL, Lucene, EQL, or ES|QL queries.</div>
        </a>
    </div>
</div>

<!-- Technology Stack -->
<div class="overview-section">
    <h2>{{ icon('cpu', '20') }} Technology Stack</h2>
    <div class="tech-grid">
        <div class="tech-item">
            {{ icon('server', '22') }}
            <div class="tech-item-name">Nginx</div>
            <div class="tech-item-desc">Reverse proxy, SSL</div>
        </div>
        <div class="tech-item">
            {{ icon('zap', '22') }}
            <div class="tech-item-name">FastAPI</div>
            <div class="tech-item-desc">REST API, HTMX</div>
        </div>
        <div class="tech-item">
            {{ icon('database', '22') }}
            <div class="tech-item-name">DuckDB</div>
            <div class="tech-item-desc">Analytics DB</div>
        </div>
        <div class="tech-item">
            {{ icon('code', '22') }}
            <div class="tech-item-name">HTMX</div>
            <div class="tech-item-desc">Server UI</div>
        </div>
        <div class="tech-item">
            {{ icon('palette', '22') }}
            <div class="tech-item-name">Custom CSS</div>
            <div class="tech-item-desc">Semantic Design</div>
        </div>
        <div class="tech-item">
            {{ icon('shield', '22') }}
            <div class="tech-item-name">Keycloak</div>
            <div class="tech-item-desc">OIDC SSO</div>
        </div>
    </div>
</div>

<!-- Key Principles -->
<div class="overview-section">
    <h2>{{ icon('lightbulb', '20') }} Design Principles</h2>
    <div class="principle-grid">
        <div class="principle-card">
            <span class="text-success">{{ icon('check-circle', '20') }}</span>
            <div>
                <strong>Standalone First</strong>
                <p>Operates independently in air-gapped environments</p>
            </div>
        </div>
        <div class="principle-card">
            <span class="text-success">{{ icon('check-circle', '20') }}</span>
            <div>
                <strong>Bundled Data</strong>
                <p>Sigma & MITRE ATT&CK data included in image</p>
            </div>
        </div>
        <div class="principle-card">
            <span class="text-success">{{ icon('check-circle', '20') }}</span>
            <div>
                <strong>Persistent User Data</strong>
                <p>Validations survive container updates</p>
            </div>
        </div>
        <div class="principle-card">
            <span class="text-success">{{ icon('check-circle', '20') }}</span>
            <div>
                <strong>Sync-on-Demand</strong>
                <p>External APIs synced periodically, not live</p>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<div class="footer-bar">
    {% if user %}
    <p class="text-muted mb-sm">
        Logged in as <strong class="text-primary">{{ user.username }}</strong>
    </p>
    {% endif %}
    <p class="text-primary" style="font-size: 0.8rem;">
        TIDE v{{ settings.tide_version }}
    </p>
</div>
{% endblock %}
