# ============================================
# TIDE Environment Configuration
# ============================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# ============================================

# --- APPLICATION SETTINGS ---
TIDE_VERSION=2.2.0
APP_URL=https://tide:8501
SYNC_INTERVAL_MINUTES=60

# --- AUTHENTICATION ---
# Set to 'true' to disable Keycloak and run without login
AUTH_DISABLED=false

# Keycloak OIDC (required if AUTH_DISABLED=false)
# KEYCLOAK_URL        : The URL users see in their browser (external)
# KEYCLOAK_INTERNAL_URL: The URL the tide-app container uses to reach
#                        Keycloak over the Docker network or host.
#                        If Keycloak is on the same host, use the hostname.
KEYCLOAK_URL=https://keycloak.yourdomain.local:8443
KEYCLOAK_INTERNAL_URL=https://keycloak.yourdomain.local:8443
KEYCLOAK_REALM=tide
KEYCLOAK_CLIENT_ID=tide-app
KEYCLOAK_CLIENT_SECRET=<your-client-secret>

# --- ELASTIC SECURITY (Required) ---
# Kibana URL for rule management
ELASTIC_URL=https://kibana.yourdomain.local:5601
# Elasticsearch URL for direct queries
ELASTICSEARCH_URL=https://elasticsearch.yourdomain.local:9200
# API Key with detection rules read/write permissions
ELASTIC_API_KEY=<your-elastic-api-key>
# Comma-separated Kibana spaces to sync
KIBANA_SPACES=production,staging

# --- OPENCTI (Optional) ---
# Threat intelligence platform integration
OPENCTI_URL=https://opencti.yourdomain.local:8080
OPENCTI_TOKEN=<your-opencti-token>

# --- GITLAB (Optional) ---
# For report dispatching to internal GitLab
GITLAB_URL=https://gitlab.yourdomain.local/
GITLAB_TOKEN=<your-gitlab-token>

# --- MITRE ATT&CK DATA ---
# Baked into the Docker image at /opt/repos/mitre/
# No internet access needed at runtime.
MITRE_SOURCE=/opt/repos/mitre/enterprise-attack.json
MITRE_MOBILE_SOURCE=/opt/repos/mitre/mobile-attack.json
MITRE_ICS_SOURCE=/opt/repos/mitre/ics-attack.json
MITRE_PRE_SOURCE=/opt/repos/mitre/pre-attack.json

# --- SIGMA / ELASTIC RULES ---
# Baked into the Docker image. No internet access needed.
SIGMA_REPO_URL=(bundled in image)
ELASTIC_REPO_URL=(bundled in image)

# --- SSL/TLS ---
# SSL_VERIFY: Whether Python verifies TLS certificates for outbound
#   HTTPS calls to Keycloak, Elastic, OpenCTI, etc.
#   'true'  = verify using system trust store (default, recommended)
#   'false' = skip verification entirely (less secure, use as last resort)
#
# CA trust is handled automatically:
#   1. Mount your CA .crt files into /usr/local/share/ca-certificates/
#      via the docker-compose.yml volumes (see comments there)
#   2. The entrypoint runs 'update-ca-certificates' at startup
#   3. Everything in the container trusts them â€” no extra config needed
SSL_VERIFY=true

# --- DATABASE ---
# DuckDB path (relative to /app in container)
DUCKDB_PATH=data/tide.duckdb

# --- LOGGING ---
LOG_LEVEL=INFO
RULE_LOG_PATH=C:\ProgramData\tide\log\rules
# LOG_FORMAT=json
